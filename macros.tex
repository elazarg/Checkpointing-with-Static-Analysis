
\newif\ifdraft
\draftfalse

\newcommand\si[1]{{\color{purple}[SI: #1]}}
\newcommand\el[1]{{\color{green}[EG: #1]}}

\newcommand\spyte{\textsc{Spyte}\xspace}
\newcommand\spytecode{\textsf{Spytecode}\xspace}

\newcommand\tLOCALS{\texttt{LOCALS}\xspace}
\newcommand\tGLOBALS{\texttt{GLOBALS}\xspace}

\newcommand\tinstr[1]{\textsf{#1}\xspace}
\newcommand\tMov{\tinstr{Mov}}
\newcommand\tGetAttr{\tinstr{GetAttr}}
\newcommand\tSetAttr{\tinstr{SetAttr}}
\newcommand\tCall{\tinstr{Call}}
\newcommand\tBind{\tinstr{Bind}}
\newcommand\tLookupDunder{\tinstr{LookupDunder}}
\newcommand\tResolveOverload{\tinstr{ResolveOverload}}
\newcommand\tExit{\tinstr{Exit}}
\newcommand\tLoadConst{\tinstr{LoadConst}}
\newcommand\tLoadLocal{\tinstr{LoadLocal}}
\newcommand\tSetLocal{\tinstr{SetLocal}}
\newcommand\tLoadGlobal{\tinstr{LoadGlobal}}
\newcommand\tAssumeEq{\tinstr{AssumeEq}}
\newcommand\tUnpack{\tinstr{Unpack}}
\newcommand\tConstructTuple{\tinstr{ConstructTuple}}
\newcommand\tConstructDict{\tinstr{ConstructDict}}


\newcommand\teffect[1]{\textsf{\color{purple!60!black}#1}\xspace}
\newcommand\tnew{\teffect{new}}
\newcommand\tupdate{\teffect{update}}
\newcommand\tptstoargs{\teffect{points\_to\_args}}
\newcommand\tboundmeth{\teffect{bound\_method}}

\newcommand\powerset{\mathscr{P}}

\newcommand{\tO}{\mathcal{O}}
\newcommand{\tK}{\mathcal{K}}
\newcommand{\tV}{\mathcal{V}}
\newcommand{\tN}{\mathds{N}}
\newcommand{\smlV}{\scriptscriptstyle\mathcal{V}}
\newcommand\smlmapsto{{\hspace{1pt}\mapsto\hspace{1pt}}}
\newcommand\smlmapstox{{\hspace{1pt}\mapsto}}

\newcommand{\tType}{\mathsf{Type}}
\newcommand{\tLoc}{\texttt{\small Loc}}
\newcommand{\tParam}{\texttt{\small Param}\xspace}
\newcommand{\tImm}{\texttt{\small Imm}\xspace}

\newcommand{\loc}[1]{\textsf{\tLoc~{#1}}}
\newcommand{\param}[1]{\textsf{\tParam~{#1}}}

\newcommand\eg{\textit{e.g.}\xspace}

\newcommand{\DependOnCSV}[1]{\tikzexternaldependsonfile{#1}}
\newcommand{\VMDIFF}[0]{{\textDelta VM}}
\newcommand{\PROCDIFF}[0]{{\textDelta Proc}}

% ==== Row macros (safe in subscripts/superscripts) ====
\newcommand{\rpos}{\mathord{\rho^{+}}}   % arguments, fields
\newcommand{\rneg}{\mathord{\rho^{-}}}   % parameters
\newcommand{\rdef}{\mathord{\rho^{=}}}   % defaults
\newcommand{\rowany}{\mathord{\rho}}     % generic row metavariable


\lstset{
  language=python,
  basicstyle={\linespread{1.2}\ttfamily
              \fontsize{9pt}{9pt}\selectfont},
  numberstyle=\tiny\color{gray},
  numbersep=5pt,
  commentstyle={\color{green!50!black}},
  escapeinside={(*@}{@*)}
}

\setlength\intextsep{0pt}

\newcommand\lnn[1]{\mbox{\tiny\color{gray} #1}}
