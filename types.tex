
% \begin{align*}
% \tau & ::=  \texttt{ref}(\rho) \\
%      &      \mid \texttt{const}(c) \\
%      &      \mid \texttt{overload}(\overline{f})  \\
%      &      \mid \texttt{union}(\overline{\tau})  \\
%      &      \mid \texttt{module}(\overline{m}) \quad \text{(fields)} \\
%      &      \mid \texttt{protocol}(\overline{m}, \overline{\alpha}) \quad \text{(fields, generics)} \\
%      &      \mid \texttt{class}(s,\overline{m}, \overline{\alpha}) \quad \text{(name, fields, generics)} \\
%      &      \mid \alpha \quad \text{(type variable)}\\
%      &      \mid \texttt{type}(\tau) \quad \text{(class type)} \\
%      &      \mid \tau[\overline{\tau}] \quad \text{(generic instantiation)} \\
%      &      \mid \texttt{any} \\
% m & ::= \langle s, \tau \rangle \\
% f & ::= \langle m, \tau, \sigma, \overline{\alpha} \rangle \quad \text{(parameters, return, side-effect, generics)} \\
% \sigma & ::= \textbf{pure} \mid \textbf{new} \mid \textbf{update} \mid \textbf{points-to-args} \\
% \end{align*}
% \caption{\label{typesdefs}}
% \end{figure}

\begin{align*}
\tau \;::=&\; \texttt{ref}(\rho)
  \\ &  \mid \texttt{const}(c)
  \\ &  \mid \texttt{star}(\overline{\tau}) \quad \text{(varargs / unpacked)}
\\ & \mid \texttt{union}(\overline{\tau})
 \\ &  \mid \texttt{overload}(\overline{\varphi})
 \\ &  \mid \texttt{module}(M)
 \\ &  \mid \texttt{class}(s, M, \overline{\alpha}, \textit{protocol?})
\\ & \mid \texttt{type}(\tau)
  \\ &  \mid \texttt{inst}(\tau, \overline{\tau}) \quad \text{(generic instantiation)}
   \\ & \mid \texttt{access}(\tau,\tau) \quad \text{(type-level indexing)}
\\ & \mid \alpha \mid \texttt{any}
\\[0.5ex]
M \;::=&\; \{\, \overline{r} \,\}
\\
r ::= &\; \langle i,\ \tau \rangle
\\
i ::= &\; \textit{name} \mid \textit{index} \in \mathbb{N}
\\[0.5ex]
\varphi \;::=&\; \langle M_{\text{params}},\ \tau_{\text{ret}},\ \overline{\alpha},\ \textit{property?} \rangle
\end{align*}
\caption{Core type forms. Effects and effectful function metadata are specified in a separate figure.}
\label{fig:types-core}
